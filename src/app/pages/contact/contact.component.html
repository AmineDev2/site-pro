<section class="contact">
  <div class="container">
    <header class="header">
      <h1>On discute de votre projet&nbsp;?</h1>
      <p class="lead">
        Dites-moi en quelques lignes votre besoin. Je vous r√©ponds sous
        <strong>24h ouvr√©es</strong>.
      </p>
    </header>

    <div class="grid">
      <!-- ======== COLONNE GAUCHE ======== -->
      <div class="card form">
        <!-- === Vue FORMULAIRE === -->
        <ng-container *ngIf="mode === 'form'; else successTpl">
          <form
            [formGroup]="form"
            (ngSubmit)="submit()"
            novalidate
            aria-describedby="rgpd-note"
          >
            <div class="row">
              <mat-form-field appearance="fill" class="fld" floatLabel="always">
                <mat-label>Nom / Soci√©t√©</mat-label>
                <input
                  matInput
                  formControlName="name"
                  placeholder="Ex. Amine ‚Ä¢ Acme SAS"
                  autocomplete="name"
                  required
                />
                <mat-error
                  *ngIf="form.get('name')?.touched && form.get('name')?.invalid"
                >
                  Indiquez votre nom (3+ caract√®res).
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="fill" class="fld" floatLabel="always">
                <mat-label>Email</mat-label>
                <input
                  matInput
                  formControlName="email"
                  type="email"
                  placeholder="vous@domaine.fr"
                  autocomplete="email"
                  required
                />
                <mat-error
                  *ngIf="
                    form.get('email')?.touched && form.get('email')?.invalid
                  "
                  >Email invalide.</mat-error
                >
              </mat-form-field>
            </div>

            <div class="row">
              <mat-form-field appearance="fill" class="fld" floatLabel="always">
                <mat-label>T√©l√©phone (optionnel)</mat-label>
                <input
                  matInput
                  formControlName="phone"
                  type="tel"
                  placeholder="+33 ..."
                  autocomplete="tel"
                />
              </mat-form-field>

              <mat-form-field appearance="fill" class="fld" floatLabel="always">
                <mat-label>Budget (optionnel)</mat-label>
                <input
                  matInput
                  formControlName="budget"
                  placeholder="Fourchette ou ordre de grandeur"
                />
              </mat-form-field>
            </div>

            <mat-form-field appearance="fill" class="fld" floatLabel="always">
              <mat-label>Message</mat-label>
              <textarea
                matInput
                formControlName="message"
                rows="6"
                placeholder="Contexte, objectifs, √©ch√©ance..."
                required
              ></textarea>
              <mat-error
                *ngIf="
                  form.get('message')?.touched && form.get('message')?.invalid
                "
              >
                Un petit message (10+ caract√®res) aide √† comprendre votre
                besoin.
              </mat-error>
            </mat-form-field>

            <!-- anti-spam discret -->
            <input
              formControlName="website"
              class="honeypot"
              tabindex="-1"
              autocomplete="off"
              aria-hidden="true"
            />

            <div class="actions">
              <button
                mat-flat-button
                color="primary"
                [disabled]="form.invalid || loading"
                type="submit"
              >
                {{ loading ? "Envoi‚Ä¶" : "Envoyer" }}
              </button>
            </div>

            <div class="alert error" *ngIf="error" aria-live="assertive">
              ‚ö†Ô∏è Oups, l‚Äôenvoi a √©chou√©. R√©essayez, ou √©crivez-moi :
              <a href="mailto:contact@votredomaine.fr"
                >contact@votredomaine.fr</a
              >
            </div>
          </form>
        </ng-container>

        <!-- === Vue SUCC√àS === -->
        <ng-template #successTpl>
          <section class="success-card" aria-live="polite">
            <h2>‚úÖ Demande envoy√©e</h2>
            <p>
              Merci ! Votre message a bien √©t√© re√ßu et sera trait√© sous
              <strong>24h ouvr√©es</strong>.
            </p>

            <div class="progress-wrap">
              <mat-progress-bar
                mode="determinate"
                [value]="progress"
              ></mat-progress-bar>
              <small class="muted">Redirection vers l‚Äôaccueil‚Ä¶</small>
            </div>

            <p class="fallback">
              Pas de redirection ? <a routerLink="/">Retourner √† l‚Äôaccueil</a>
            </p>
          </section>
        </ng-template>
      </div>

      <!-- ======== COLONNE DROITE (ASIDE) ======== -->
      <aside class="card aside">
        <h2>Coordonn√©es</h2>
        <ul class="info">
          <li>
            <span class="ico">‚úâÔ∏è</span>
            <a href="mailto:AmineDevApp@hotmail.com">AmineDevApp@hotmail.com</a>
          </li>
          <li>
            <span class="ico">üìû</span>
            <a href="tel:+33600000000">+33 6 69 33 21 40</a>
          </li>
          <li>
            <span class="ico">üìç</span>
            <span>France ‚Äî remote / hybride</span>
          </li>
          <li>
            <span class="ico">‚è±Ô∏è</span>
            <span>R√©ponse sous 24h ouvr√©es</span>
          </li>
        </ul>

        <h3>Disponibilit√©s</h3>
        <p class="note">
          Cr√©neaux d‚Äô√©change : lun‚Äìven, 12h‚Äì14h & 18h‚Äì20h (CET).
        </p>

        <div class="badges">
          <span class="badge">Angular</span>
          <span class="badge">NestJS</span>
          <span class="badge">TypeScript</span>
          <span class="badge">Flask</span>
          <span class="badge">Python</span>
          <span class="badge">PostgreSQL</span>
        </div>
      </aside>
    </div>
  </div>
</section>
